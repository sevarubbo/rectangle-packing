!function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=1)}([function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(2),o=i(s),u=n(3),c=i(u),l=n(4),h=i(l),f=n(6),g=i(f),d=n(5),p=i(d),v=function(){function t(){r(this,t),this.container=new o.default(800,800)}return a(t,[{key:"onDOMReady",value:function(){var t=this;this.drawContainer(this.container),this.listingsPromise.then(function(e){var n=t.arrangeListings(e),i=e.filter(function(t){return!n.includes(t)});t.renderListings(n),t.renderUnfitListings(i)})}},{key:"drawContainer",value:function(t){var e=new p.default(t).render();$("body").prepend(e),this.$container=e}},{key:"arrangeListings",value:function(t){var e=t.map(function(t){return t.rectangle}),n=this.container.arrangeRectangles(e);return t.filter(function(t){return n.includes(t.rectangle)})}},{key:"renderListings",value:function(t){var e=t.map(function(t){return new g.default(t).render()});this.$container.html(e)}},{key:"renderUnfitListings",value:function(t){var e=t.map(function(t){return new g.default(t).render()});$(".b-unfit-listings").append(e)}},{key:"getURLParam",value:function(t){var e=window.location.href;t=t.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)"),i=n.exec(e);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null}},{key:"shouldRandomGenerate",get:function(){return"random"===this.getURLParam("source")}},{key:"generatedListings",get:function(){return Array.apply(null,new Array(40)).map(function(){var t=32*Math.ceil(8*Math.random()),e=32*Math.ceil(8*Math.random());return new c.default({title:"Listing "+t+"x"+e,rectangle:new h.default(t,e),image:"http://lorempixel.com/"+t+"/"+e})})}},{key:"listingsPromise",get:function(){var t=this;return new Promise(function(e,n){t.shouldRandomGenerate?e(t.generatedListings):$.get("./data/listings.json").then(function(t){var n=t.map(function(t){return new c.default({rectangle:new h.default(t.width,t.height),title:t.title,image:t.image})});e(n)},n)})}}]),t}();e.default=v},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var r=n(0),a=i(r),s=new a.default;$(function(){s.onDOMReady()})},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function(){function t(e,n){i(this,t),this.width=e,this.height=n,this.packedRectangles=[],this.gaps=new Array(this.width).fill(0),this.cursorX=0}return r(t,[{key:"arrangeRectangles",value:function(t){var e=t.slice();for(e.sort(function(t,e){return t.height-e.height||e.width-t.width});e.length;){var n=this.findLowestGap();this.cursorX=n.posX;var i=this.findBestFittingRectangle(e,n.width);i?(e.splice(e.indexOf(i),1),i.height+this.gaps[this.cursorX]<=this.height&&this.placeRectangle(i)):this.raiseGapsToLowestGapNeighbour(n)}return this.packedRectangles}},{key:"placeRectangle",value:function(t){t.left=this.cursorX,t.top=this.gaps[this.cursorX];for(var e=this.cursorX;e<this.cursorX+t.width;e++)this.gaps[e]+=t.height;this.packedRectangles.push(t)}},{key:"findLowestGap",value:function(){var t=this.gaps[0],e=0,n=1,i=void 0;for(i=0;i<this.gaps.length;i++)this.gaps[i]<t&&(t=this.gaps[i],e=i);for(i=e+1;i<this.gaps.length&&this.gaps[i]===this.gaps[i-1];)n+=1,i+=1;return{posX:e,width:n}}},{key:"findBestFittingRectangle",value:function(t,e){var n=null,i=0;return t.forEach(function(t){var r=t.width/e;r<=1&&r>=i&&(i=r,n=t)}),n}},{key:"raiseGapsToLowestGapNeighbour",value:function(t){var e=void 0;e=0===this.cursorX?this.gaps[t.width]:this.cursorX+t.width===this.gaps.length?this.gaps[this.cursorX-1]:this.gaps[this.cursorX-1]<=this.gaps[this.cursorX+t.width]?this.gaps[this.cursorX-1]:this.gaps[this.cursorX+t.width];for(var n=this.cursorX;n<this.cursorX+t.width;n++)this.gaps[n]=e}}]),t}();e.default=a},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function t(e){i(this,t),this.rectangle=e.rectangle,this.title=e.title||"Untitled",this.image=e.image||"http://lorempixel.com/"+this.rectangle.width+"/"+this.rectangle.height};e.default=r},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function t(e,n){i(this,t),this.width=e,this.height=n,this.top=0,this.left=0};e.default=r},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function(){function t(e){i(this,t),this.container=e,this.$el=$('<section class="b-container"></section>')}return r(t,[{key:"render",value:function(){return this.$el.css({width:this.container.width,height:this.container.height}),this.$el}}]),t}();e.default=a},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function(){function t(e){i(this,t),this.listing=e,this.$el=$('<article class="b-listing '+this.sizeModifier+'"></article>')}return r(t,[{key:"render",value:function(){return this.$el.html('<h1 class="b-listing__title">'+this.listing.title+"</h1>"),this.$el.css({top:this.listing.rectangle.top,left:this.listing.rectangle.left,width:this.listing.rectangle.width,height:this.listing.rectangle.height,backgroundImage:'url("'+this.listing.image+'")'}),this.$el}},{key:"sizeModifier",get:function(){var t=this.listing.rectangle.width,e="medium";return t<=32?e="x-small":t<=64?e="small":t>=256&&(e="large"),"m-size_"+e}}]),t}();e.default=a}]);